$schema: https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#
contentVersion: 1.0.0.0
parameters:
  location:
    type: string
    metadata:
      description: Location of the API Connector.
    defaultValue: "[resourceGroup().location]"
  customApiName:
    type: string
    metadata:
      description: Name of the custom API.
    defaultValue: KeyVault
  customApiDisplayName:
    type: string
    metadata:
      description: Display name of the custom API.
    defaultValue: KeyVault
  customApiDescription:
    type: string
    metadata:
      description: Description of the custom API.
    defaultValue: This is a custom API to Azure Key Vault for Logic App
  customApiIconUri:
    type: string
    metadata:
      description: The custom API icon in the embedded base64 format.
    defaultValue: https://raw.githubusercontent.com/aliencube/Key-Vault-Connector-for-Logic-Apps/dev/icons/keyvault-custom-api.png
    # defaultValue: "data:image/png;base64,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"
  customApiServiceUrl:
    type: string
    metadata:
      description: Service URL of the custom API
  customApiSwaggerDefinition:
    type: object
    metadata:
      description: Swagger (Open API 2.0) definition of the custom API
variables:
  customApi:
    name: "[parameters('customApiName')]"
    apiVersion: "[providers('Microsoft.Web', 'customApis').apiVersions[0]]"
    location: "[parameters('location')]"
    displayName: "[parameters('customApiDisplayName')]"
    description: "[parameters('customApiDescription')]"
    iconUri: "[parameters('customApiIconUri')]"
    serviceUrl: "[parameters('customApiServiceUrl')]"
    swagger: "[parameters('customApiSwaggerDefinition')]"
  tags:
    author: Justin Yoo
    profile: https://twitter.com/justinchronicle
    projectUrl: https://github.com/aliencube/Key-Vault-Connector-for-Logic-Apps
    repositoryUrl: https://github.com/aliencube/Key-Vault-Connector-for-Logic-Apps
    license: https://raw.githubusercontent.com/aliencube/Key-Vault-Connector-for-Logic-Apps/master/LICENSE
resources:
- comments: "### RESOURCE - CUSTOM API - KEY VAULT ###"
  type: Microsoft.Web/customApis
  apiVersion: "[variables('customApi').apiVersion]"
  location: "[variables('customApi').location]"
  name: "[variables('customApi').name]"
  tags: "[variables('tags')]"
  properties:
    displayName: "[variables('customApi').displayName]"
    description: "[variables('customApi').description]"
    iconUri: "[variables('customApi').iconUri]"
    backendService:
      serviceUrl: "[variables('customApi').serviceUrl]"
    # apiDefinitions:
    #   originalSwaggerUrl: "https://raw.githubusercontent.com/aliencube/Key-Vault-Connector-for-Logic-Apps/dev/keyvault-connector-open-api.json"
    #   modifiedSwaggerUrl: "https://raw.githubusercontent.com/aliencube/Key-Vault-Connector-for-Logic-Apps/dev/keyvault-connector-open-api.json"
    connectionParameters:
      api_key:
        type: securestring
        uiDefinition:
          displayName: API Key
          description: The API Key for this API
          tooltip: Provide your API Key
          constraints:
            tabIndex: 2,
            clearText: false,
            required: true
    swagger: "[variables('customApi').swagger]"
outputs:
  customApiName:
    type: string
    value: "[variables('customApi').name]"
